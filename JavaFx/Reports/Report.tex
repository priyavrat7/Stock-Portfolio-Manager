\documentclass[12pt,a4paper]{article}
\usepackage[utf8]{inputenc}
\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{enumitem}

\definecolor{codegreen}{rgb}{0,0.6,0}
\definecolor{codegray}{rgb}{0.5,0.5,0.5}
\definecolor{codepurple}{rgb}{0.58,0,0.82}
\definecolor{backcolour}{rgb}{0.95,0.95,0.92}

\lstdefinestyle{javastyle}{
    backgroundcolor=\color{backcolour},   
    commentstyle=\color{codegreen},
    keywordstyle=\color{magenta},
    numberstyle=\tiny\color{codegray},
    stringstyle=\color{codepurple},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,                 
    numbers=left,                    
    numbersep=5pt,                  
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}
\lstset{style=javastyle}

\title{\textbf{Trading Stock Portfolio Management System}\\
       \large Technical Report}
\author{Software Engineering Project}
\date{20th March 2025}

\begin{document}

\maketitle
\tableofcontents
\newpage

\section{Executive Summary}

This document presents the technical architecture, implementation, and future roadmap of the McGill Stock Portfolio Management System, a desktop application built with JavaFX for real-time portfolio tracking, analytics, and trade management. The system integrates:

\begin{itemize}[nosep]
    \item \textbf{JavaFX 22} for cross-platform UI with real-time data binding
    \item \textbf{PostgreSQL 16} (Docker) for persistent portfolio storage
    \item \textbf{Yahoo Finance API} for live market data integration
    \item \textbf{kdb+/q} (planned) for microsecond-latency time-series analytics
    \item \textbf{Maven} for dependency and build lifecycle management
\end{itemize}

The application follows industry-standard MVC architecture, implements safe multithreading patterns for non-blocking UI, and provides extensibility for advanced financial analytics.

\section{System Architecture}

\subsection{Architecture Overview}

The system adopts a layered MVC (Model-View-Controller) architecture with clear separation of concerns:

\begin{enumerate}[nosep]
    \item \textbf{Presentation Layer}: JavaFX UI components (TableView, PieChart, Forms)
    \item \textbf{Controller Layer}: Event handlers, scene management, UI orchestration
    \item \textbf{Service Layer}: Business logic, validation, computation
    \item \textbf{Repository Layer}: Data access abstraction (PostgreSQL via JDBC)
    \item \textbf{Model Layer}: Domain entities with JavaFX properties for reactive UI binding
\end{enumerate}

\subsection{Technology Stack}

\begin{table}[h]
\centering
\begin{tabular}{@{}ll@{}}
\toprule
\textbf{Component} & \textbf{Technology} \\ \midrule
Programming Language & Java 21 \\
UI Framework & JavaFX 22.0.2 \\
Build Tool & Maven 3.x \\
Database & PostgreSQL 16 (Alpine) \\
Container Platform & Docker / Docker Compose \\
Time-Series DB (planned) & kdb+ 4.1 \\
Market Data API & Yahoo Finance v7 \\
JSON Parsing & Google Gson 2.10.1 \\
JDBC Driver & PostgreSQL JDBC 42.7.1 \\
kdb+ IPC Client & com.kx:javakdb 2.1 \\ \bottomrule
\end{tabular}
\caption{Technology Stack}
\end{table}

\subsection{Package Structure}

\begin{lstlisting}[language=bash, numbers=none]
com.mcgill.application
+-- controller/       # UI event handling, scene orchestration
|   +-- PortfolioController.java
|   +-- DataManagementController.java
+-- service/          # Business logic layer
|   +-- StockService.java
|   +-- StockPriceService.java
|   +-- CalculatorService.java
|   +-- EmployeeService.java
|   +-- KdbClientService.java (kdb+ integration)
+-- repository/       # Data access layer
|   +-- StockRepository.java
|   +-- StockRepositoryPostgreSQL.java
|   +-- EmployeeRepository.java
+-- model/            # Domain entities
|   +-- Stock.java
|   +-- Person.java
|   +-- LiveTick.java
+-- database/         # DB connection management
|   +-- DatabaseConnection.java
+-- Main.java         # Application entry point
\end{lstlisting}

\section{Core Features}

\subsection{Portfolio Management}

\begin{itemize}[nosep]
    \item Add, update, delete stock holdings (symbol, shares, purchase price, current price)
    \item Real-time profit/loss calculation with percentage metrics
    \item Portfolio visualization via interactive PieChart
    \item Sell shares with automatic price refresh from live API
    \item Persistent storage in PostgreSQL with ACID guarantees
\end{itemize}

\subsection{Live Market Data Integration}

\begin{itemize}[nosep]
    \item Real-time price refresh via Yahoo Finance API (batch endpoint for multiple symbols)
    \item Automatic timestamp tracking (last\_refreshed) in EDT
    \item Non-blocking background refresh using JavaFX Task
    \item Rate-limiting and User-Agent configuration to avoid API throttling
\end{itemize}

\subsection{Advanced Calculator}

Stock market calculators with dedicated tabs:
\begin{itemize}[nosep]
    \item Profit/Loss Calculator (absolute \& percentage)
    \item ROI Calculator (Return on Investment)
    \item Break-even Price Calculator
    \item Position Size Calculator
    \item Average Purchase Price Calculator
\end{itemize}

Runs in a separate window for multi-view parallel workflows.

\subsection{Real-Time Analysis (Premium Feature)}

\textbf{Current Status}: UI window with polling architecture in place; backend integration with kdb+ in progress.

\textbf{Planned Features}:
\begin{itemize}[nosep]
    \item Live tick-by-tick price feed from kdb+ RDB (tickerplant/RDB/HDB stack)
    \item Rolling VWAP (Volume-Weighted Average Price) and spread analytics
    \item Asof joins for historical quote/trade correlation
    \item Micro-charts (candlestick, heatmaps) for intraday microstructure
    \item Sub-millisecond latency for tick ingestion and analytics
\end{itemize}

\section{Data Flow}

\subsection{Portfolio Persistence Flow}

\begin{enumerate}[nosep]
    \item User interacts with PortfolioController (add/update/sell)
    \item Controller validates input and delegates to StockService
    \item Service applies business logic (e.g., share constraints, ROI)
    \item StockRepositoryPostgreSQL executes JDBC prepared statements
    \item PostgreSQL Docker container persists changes
    \item Controller updates UI via ObservableList binding (automatic TableView refresh)
\end{enumerate}

\subsection{Real-Time Price Refresh Flow}

\begin{enumerate}[nosep]
    \item User clicks "Refresh Prices" button
    \item PortfolioController spawns a background Task
    \item Task calls StockPriceService.getCurrentPrice for each stock
    \item StockPriceService makes HTTP GET to Yahoo Finance batch endpoint
    \item JSON response parsed with Gson; regularMarketPrice extracted
    \item Task updates Stock.currentPrice and Stock.lastRefreshed (in memory)
    \item StockService.persist(...) saves to PostgreSQL
    \item Platform.runLater updates UI labels and TableView
\end{enumerate}

\subsection{Real-Time Analysis Flow (Future)}

\begin{enumerate}[nosep]
    \item kdb+ tickerplant (TP) ingests market feed (UDP multicast or vendor API)
    \item TP journals ticks and publishes to RDB (in-memory) and HDB (on-disk)
    \item JavaFX KdbClientService subscribes to RDB via IPC
    \item RDB pushes tick updates to the client asynchronously
    \item Client thread receives updates, parses via kx.c (com.kx.c.Flip)
    \item Platform.runLater appends rows to Real-Time Analysis TableView
\end{enumerate}

\section{Concurrency and Multithreading}

\subsection{Threading Strategy}

All long-running operations (HTTP, JDBC, sleep) are moved off the JavaFX Application Thread to prevent UI freezes.

\textbf{Patterns Applied}:
\begin{itemize}[nosep]
    \item \textbf{Task<T>}: background work with progress/message binding for UI feedback
    \item \textbf{Platform.runLater}: async enqueue to FX thread for safe UI updates
    \item \textbf{ScheduledExecutorService}: fixed-rate polling (e.g., kdb+ query every 1s)
    \item \textbf{Daemon threads}: background listeners (kdb+ IPC) that exit with the app
\end{itemize}

\subsection{Example: Price Refresh (Async Pattern)}

\begin{lstlisting}[language=Java, caption=refreshStockPrices in PortfolioController]
Task<Void> task = new Task<>() {
    @Override protected Void call() {
        for (Stock s : stocks) {
            double price = stockPriceService.getCurrentPrice(s.getSymbol());
            s.setCurrentPrice(price);
            s.setLastRefreshed(LocalDateTime.now());
            stockService.persist(s);
        }
        Platform.runLater(() -> showSuccess("Prices updated"));
        return null;
    }
};
new Thread(task, "price-refresh").start();
\end{lstlisting}

\subsection{Example: Real-Time Polling (kdb+ RDB)}

\begin{lstlisting}[language=Java, caption=Polling kdb+ quote table]
ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor();
ses.scheduleAtFixedRate(() -> {
    try {
        Object obj = kdbClient.exec("select sym,px from quote");
        if (obj instanceof com.kx.c.Flip f) {
            String[] sym = (String[]) f.y[0];
            double[] px = (double[]) f.y[1];
            Platform.runLater(() -> {
                for (int i = 0; i < sym.length; i++) {
                    LiveTick lt = new LiveTick();
                    lt.setSymbol(sym[i]);
                    lt.setPrice(px[i]);
                    data.add(0, lt);
                }
            });
        }
    } catch (Exception ignored) {}
}, 0, 1, TimeUnit.SECONDS);
\end{lstlisting}

\section{Database Design}

\subsection{PostgreSQL Schema}

\textbf{Table: portfolio}

\begin{table}[h]
\centering
\begin{tabular}{@{}llll@{}}
\toprule
\textbf{Column} & \textbf{Type} & \textbf{Constraint} & \textbf{Description} \\ \midrule
id & SERIAL & PRIMARY KEY & Auto-increment ID \\
symbol & VARCHAR(10) & NOT NULL & Stock ticker (e.g., AAPL) \\
company & VARCHAR(255) & NOT NULL & Company name \\
shares & INTEGER & NOT NULL, $\geq 0$ & Number of shares owned \\
purchase\_price & NUMERIC(10,2) & NOT NULL & Original buy price \\
current\_price & NUMERIC(10,2) & NOT NULL & Latest market price \\
last\_refreshed & TIMESTAMP & NULL & Last API update time \\ \bottomrule
\end{tabular}
\caption{PostgreSQL Portfolio Schema}
\end{table}

\subsection{Future kdb+ Schema (Real-Time Analytics)}

\textbf{Table: quote (in-memory RDB)}

\begin{table}[h]
\centering
\begin{tabular}{@{}lll@{}}
\toprule
\textbf{Column} & \textbf{Type} & \textbf{Description} \\ \midrule
sym & symbol & Stock ticker \\
t & timespan & Nanosecond timestamp \\
px & float & Last trade price \\
sz & long & Trade size \\ \bottomrule
\end{tabular}
\caption{kdb+ Quote Table (Tick Data)}
\end{table}

\textbf{Architecture}: Tickerplant (TP) $\rightarrow$ RDB (today in RAM) $\rightarrow$ HDB (historical on disk). JavaFX subscribes to RDB for push updates or polls for batch retrieval.

\section{API Integration}

\subsection{Yahoo Finance API}

\textbf{Endpoint}: \texttt{https://query1.finance.yahoo.com/v7/finance/quote}

\textbf{Parameters}:
\begin{itemize}[nosep]
    \item \texttt{symbols}: comma-separated ticker list (e.g., AAPL,MSFT,GOOGL)
    \item User-Agent header required to avoid 401/403
\end{itemize}

\textbf{Response}: JSON with \texttt{quoteResponse.result[].regularMarketPrice}

\textbf{Rate Limits}: Public endpoint; recommend 1-2 requests/second max; batch symbols to minimize calls.

\textbf{Implementation}: StockPriceService uses Java HttpClient, Gson for parsing, chunked batch requests to avoid rate limits.

\subsection{Alpha Vantage (Alternative)}

\textbf{Endpoint}: \texttt{https://www.alphavantage.co/query?function=GLOBAL\_QUOTE}

\textbf{Rate Limits}: Free tier 5 calls/min; premium tiers for higher throughput.

\textbf{Usage}: kdb+ RDB can fetch via \texttt{.Q.hg} with rotation through symbols (12s interval per symbol for 5/min compliance).

\section{JavaFX UI Design}

\subsection{Scene Structure}

\begin{enumerate}[nosep]
    \item \textbf{Login Scene}: Basic auth placeholder (username/password)
    \item \textbf{Main Menu}: Navigation hub (Portfolio, Calculator, Logout)
    \item \textbf{Portfolio Scene}: Stock table, add/sell forms, PieChart button, refresh button, real-time analysis button
    \item \textbf{Calculator Window}: Separate stage with tabbed calculators
    \item \textbf{Real-Time Analysis Window}: Separate stage with live tick TableView (polling kdb+ RDB)
\end{enumerate}

\subsection{CSS Theming}

Professional color palette inspired by iOS design:

\begin{itemize}[nosep]
    \item Primary: \texttt{\#007AFF} (iOS blue)
    \item Success: \texttt{\#34C759}
    \item Danger: \texttt{\#FF3B30}
    \item Neutral grays: \texttt{\#F2F2F7}, \texttt{\#8E8E93}
\end{itemize}

Modular CSS: \texttt{theme.css}, \texttt{common.css}, \texttt{portfolio.css}, \texttt{calculator.css}.

\subsection{Reactive Data Binding}

Stock model uses JavaFX properties:

\begin{lstlisting}[language=Java, caption=Stock.java properties]
private final StringProperty symbol = new SimpleStringProperty();
private final DoubleProperty currentPrice = new SimpleDoubleProperty();
private final ObjectProperty<LocalDateTime> lastRefreshed = new SimpleObjectProperty<>();

public DoubleProperty profitLossProperty() {
    return new SimpleDoubleProperty(
        (currentPrice.get() - purchasePrice.get()) * shares.get()
    );
}
\end{lstlisting}

TableView columns bind to these properties; UI updates propagate automatically when values change.

\section{Concurrency Model}

\subsection{Threading Rules}

\begin{enumerate}[nosep]
    \item All UI mutations occur on the JavaFX Application Thread
    \item HTTP, JDBC, and sleep operations run on background threads (Task, ExecutorService)
    \item Platform.runLater marshals results back to the FX thread
    \item ScheduledExecutorService handles periodic tasks (polling, timers)
\end{enumerate}

\subsection{Async Patterns Used}

\textbf{Background Task with Progress}:

\begin{lstlisting}[language=Java]
Task<Void> refreshTask = new Task<>() {
    @Override protected Void call() {
        updateMessage("Fetching prices...");
        // HTTP/JDBC work here
        updateProgress(n, total);
        return null;
    }
};
new Thread(refreshTask, "bg-refresh").start();
\end{lstlisting}

\textbf{Scheduled Polling}:

\begin{lstlisting}[language=Java]
ScheduledExecutorService ses = Executors.newSingleThreadScheduledExecutor();
ses.scheduleAtFixedRate(() -> {
    var rows = kdbClient.exec("select sym,px from quote");
    Platform.runLater(() -> updateTable(rows));
}, 0, 1, TimeUnit.SECONDS);
\end{lstlisting}

\textbf{Daemon Threads}: kdb+ IPC listener runs as daemon to exit cleanly with the app.

\section{Database Design}

\subsection{PostgreSQL Schema}

\textbf{Table: portfolio}

\begin{table}[h]
\centering
\begin{tabular}{@{}llll@{}}
\toprule
\textbf{Column} & \textbf{Type} & \textbf{Constraint} & \textbf{Description} \\ \midrule
id & SERIAL & PRIMARY KEY & Auto-increment ID \\
symbol & VARCHAR(10) & NOT NULL & Stock ticker (e.g., AAPL) \\
company & VARCHAR(255) & NOT NULL & Company name \\
shares & INTEGER & NOT NULL, $\geq 0$ & Number of shares owned \\
purchase\_price & NUMERIC(10,2) & NOT NULL & Original buy price \\
current\_price & NUMERIC(10,2) & NOT NULL & Latest market price \\
last\_refreshed & TIMESTAMP & NULL & Last API update time \\ \bottomrule
\end{tabular}
\caption{PostgreSQL Portfolio Schema}
\end{table}

\subsection{Future kdb+ Schema (Real-Time Analytics)}

\textbf{Table: quote (in-memory RDB)}

\begin{table}[h]
\centering
\begin{tabular}{@{}lll@{}}
\toprule
\textbf{Column} & \textbf{Type} & \textbf{Description} \\ \midrule
sym & symbol & Stock ticker \\
px & float & Current quote price \\ \bottomrule
\end{tabular}
\caption{kdb+ Quote Table (Current Prices)}
\end{table}

\textbf{Architecture}: Tickerplant (TP) $\rightarrow$ RDB (today in RAM) $\rightarrow$ HDB (historical on disk). JavaFX subscribes to RDB for push updates or polls for batch retrieval.

\section{API Integration}

\subsection{Yahoo Finance API}

\textbf{Endpoint}: \texttt{https://query1.finance.yahoo.com/v7/finance/quote}

\textbf{Parameters}:
\begin{itemize}[nosep]
    \item \texttt{symbols}: comma-separated ticker list (e.g., AAPL,MSFT,GOOGL)
    \item User-Agent header required to avoid 401/403
\end{itemize}

\textbf{Response}: JSON with \texttt{quoteResponse.result[].regularMarketPrice}

\textbf{Rate Limits}: Public endpoint; recommend 1-2 requests/second max; batch symbols to minimize calls.

\textbf{Implementation}: StockPriceService uses Java HttpClient, Gson for parsing, chunked batch requests to avoid rate limits.

\subsection{Alpha Vantage (Alternative)}

\textbf{Endpoint}: \texttt{https://www.alphavantage.co/query?function=GLOBAL\_QUOTE}

\textbf{Rate Limits}: Free tier 5 calls/min; premium tiers for higher throughput.

\textbf{Usage}: kdb+ RDB can fetch via \texttt{.Q.hg} with rotation through symbols (12s interval per symbol for 5/min compliance).

\section{Build and Deployment}

\subsection{Maven Build Lifecycle}

\begin{lstlisting}[language=bash, numbers=none]
mvn clean compile      # compile Java sources
mvn package            # build JAR
mvn javafx:run         # run JavaFX app via plugin
\end{lstlisting}

\textbf{pom.xml highlights}:
\begin{itemize}[nosep]
    \item Java 21 source/target
    \item JavaFX dependencies (controls, graphics, base) 22.0.2
    \item PostgreSQL JDBC 42.7.1
    \item Gson 2.10.1
    \item com.kx:javakdb 2.1 (kdb+ IPC)
    \item javafx-maven-plugin for running without module-path fuss
\end{itemize}

\subsection{Docker Database}

\textbf{Service}: PostgreSQL 16 Alpine

\textbf{Configuration} (\texttt{docker-compose.yml}):
\begin{itemize}[nosep]
    \item Container name: \texttt{mcgill-stock-postgres}
    \item Port: \texttt{5433:5432} (host:container)
    \item Volume: \texttt{stock\_portfolio\_data} for persistence
    \item Init script: \texttt{init.sql} creates schema and test data
    \item Healthcheck: \texttt{pg\_isready} at 10s intervals
\end{itemize}

\textbf{Commands}:
\begin{lstlisting}[language=bash, numbers=none]
docker-compose up -d                # start DB
docker exec -it mcgill-stock-postgres psql -U mcgill_user -d stock_portfolio
docker-compose down                 # stop (data persists)
docker-compose down -v              # stop and delete volume
\end{lstlisting}

\subsection{kdb+ Startup}

\textbf{Scripts}:
\begin{itemize}[nosep]
    \item \texttt{JavaFx/scripts/kdb-start.sh}: starts RDB (and feed if enabled) in background
    \item \texttt{JavaFx/scripts/kdb-stop.sh}: gracefully stops processes via PIDs
    \item Logs: \texttt{JavaFx/kdb/logs/*.log}
    \item PIDs: \texttt{JavaFx/kdb/run/*.pid}
\end{itemize}

\textbf{Startup}:
\begin{lstlisting}[language=bash, numbers=none]
Q_BIN=/Users/priv/q/m64/q JavaFx/scripts/kdb-start.sh
lsof -i :5012   # verify RDB is listening
\end{lstlisting}

\section{Security and Best Practices}

\subsection{Database Security}

\begin{itemize}[nosep]
    \item Credentials in docker-compose.yml (dev mode); use secrets manager for prod
    \item JDBC prepared statements to prevent SQL injection
    \item Connection pooling (future: HikariCP) for scalability
\end{itemize}

\subsection{API Best Practices}

\begin{itemize}[nosep]
    \item User-Agent header for Yahoo Finance compliance
    \item Batch requests to minimize API calls
    \item Rate-limiting logic (12s per symbol for Alpha Vantage free tier)
    \item Graceful degradation on network/API failures (catch, log, show user message)
\end{itemize}

\subsection{Code Quality}

\begin{itemize}[nosep]
    \item Separation of concerns (MVC layers)
    \item Repository pattern for swappable data sources (in-memory $\leftrightarrow$ PostgreSQL)
    \item Service layer encapsulates business logic (no DB logic in controllers)
    \item JavaFX properties for reactive UI (no manual listeners)
\end{itemize}

\section{Testing and Troubleshooting}

\subsection{Common Issues}

\begin{enumerate}[nosep]
    \item \textbf{UI freezes}: long operation on FX thread $\rightarrow$ move to Task
    \item \textbf{IllegalStateException (not on FX thread)}: UI touched from background $\rightarrow$ wrap in Platform.runLater
    \item \textbf{PostgreSQL connection refused}: Docker not running $\rightarrow$ docker-compose up -d
    \item \textbf{Module javafx.controls not found}: IntelliJ VM options misconfigured $\rightarrow$ remove all VM options; let Maven handle module-path
    \item \textbf{kdb+ IPC subscription empty}: broadcast syntax error in TP/RDB $\rightarrow$ use polling interim; revisit push after validating q scripts
\end{enumerate}

\subsection{Debugging Tools}

\begin{itemize}[nosep]
    \item IntelliJ Debugger: set breakpoints in controllers, services
    \item PostgreSQL psql: \texttt{docker exec -it mcgill-stock-postgres psql ...}
    \item kdb+ q console: connect via \texttt{hopen \`:5012} and query tables
    \item Logs: \texttt{JavaFx/kdb/logs/*.log} for q process errors
    \item lsof/netstat: verify ports (5012 for kdb+, 5433 for Postgres)
\end{itemize}

\section{Future Enhancements}

\subsection{Short-Term (Weeks)}

\begin{itemize}[nosep]
    \item Finalize kdb+ subscription (push model) for Real-Time Analysis
    \item Add User-Agent rotation/proxy for Yahoo API resilience
    \item Implement rolling VWAP and spread analytics in q
    \item Add micro-charts (line/candlestick) in Real-Time Analysis window
\end{itemize}

\subsection{Medium-Term (Months)}

\begin{itemize}[nosep]
    \item HDB integration: persist intraday ticks to disk; enable backtesting queries
    \item Multi-user support: authentication, role-based access control
    \item Portfolio analytics: Sharpe ratio, beta, drawdown metrics
    \item Export/import: CSV, Excel for portfolio snapshots
    \item Alerts: threshold-based notifications (price drops, profit targets)
\end{itemize}

\subsection{Long-Term (Quarters)}

\begin{itemize}[nosep]
    \item Production kdb+ deployment: bare-metal or tuned VMs for sub-ms latency
    \item Integration with broker APIs (FIX, OUCH) for order execution
    \item Advanced risk analytics: Greeks (options), VaR, stress testing
    \item Web UI (Spring Boot + React) for mobile/cross-platform access
    \item Machine learning: anomaly detection, predictive signals
\end{itemize}

\section{Performance Considerations}

\subsection{Current Performance}

\begin{itemize}[nosep]
    \item UI responsiveness: $<$16ms per frame (60 FPS target via non-blocking I/O)
    \item Price refresh latency: 200â€“500ms per stock (Yahoo API response time)
    \item PostgreSQL query latency: $<$10ms for portfolio CRUD (local Docker)
    \item kdb+ query latency (polling): $<$5ms for in-memory select (RDB)
\end{itemize}

\subsection{Optimization Roadmap}

\begin{itemize}[nosep]
    \item Replace HTTP polling with WebSocket for sub-second API updates
    \item Connection pooling (HikariCP) for PostgreSQL under load
    \item kdb+ push subscriptions to reduce polling overhead
    \item Compute analytics (VWAP, spreads) server-side in q; send aggregates to JavaFX
    \item Cache frequently-accessed data (e.g., company names) to reduce DB round-trips
\end{itemize}

\section{Deployment Instructions}

\subsection{Prerequisites}

\begin{itemize}[nosep]
    \item Java 21+ JDK
    \item Maven 3.9+
    \item Docker Desktop (for PostgreSQL)
    \item kdb+ 4.1+ (for Real-Time Analysis; optional for basic portfolio)
\end{itemize}

\subsection{Setup Steps}

\begin{enumerate}
    \item Clone repository and navigate to \texttt{JavaFx/}
    \item Start PostgreSQL:
    \begin{lstlisting}[language=bash, numbers=none]
docker-compose up -d
    \end{lstlisting}
    \item Build project:
    \begin{lstlisting}[language=bash, numbers=none]
mvn clean package
    \end{lstlisting}
    \item Run app (IntelliJ or Maven):
    \begin{lstlisting}[language=bash, numbers=none]
mvn javafx:run
    \end{lstlisting}
    \item (Optional) Start kdb+ for Real-Time Analysis:
    \begin{lstlisting}[language=bash, numbers=none]
Q_BIN=/path/to/q JavaFx/scripts/kdb-start.sh
    \end{lstlisting}
\end{enumerate}

\subsection{IntelliJ IDEA Configuration}

\begin{itemize}[nosep]
    \item Project SDK: Java 21
    \item Main class: \texttt{com.mcgill.application.Main}
    \item VM options: (leave empty; Maven handles JavaFX module-path)
    \item Use classpath of module: JavaFx
    \item Before launch: Build Project
\end{itemize}

\section{Documentation}

Comprehensive docs in \texttt{JavaFx/docs/}:

\begin{itemize}[nosep]
    \item \texttt{README.md}: Project overview and doc navigation
    \item \texttt{GETTING\_STARTED.md}: Setup and installation
    \item \texttt{ARCHITECTURE\_GUIDE.md}: MVC layers and data flow
    \item \texttt{DATABASE.md}: PostgreSQL schema and Docker commands
    \item \texttt{LIVE\_PRICES.md}: Yahoo Finance API integration
    \item \texttt{UI\_GUIDE.md}: Screen-by-screen user guide
    \item \texttt{COMMANDS.md}: Quick reference for Docker, psql, Maven
    \item \texttt{KDB\_PREFERRED.md}: Why kdb+ for real-time finance, comparison table
    \item \texttt{THREADING\_ASYNC.md}: Concurrency patterns, Task vs ExecutorService
    \item \texttt{TROUBLESHOOTING.md}: Common errors and solutions
\end{itemize}

\section{Conclusion}

The McGill Stock Portfolio Management System demonstrates industry-standard patterns for building responsive, data-intensive desktop applications:

\begin{itemize}[nosep]
    \item Clean MVC architecture with layered separation
    \item Non-blocking UI via background threading and Platform.runLater
    \item Persistent storage with PostgreSQL and Docker orchestration
    \item Live market data integration with rate-limit-aware HTTP clients
    \item Extensibility for advanced time-series analytics via kdb+ (in progress)
\end{itemize}

The system is production-ready for basic portfolio management and serves as a solid foundation for real-time trading analytics, risk management, and multi-user SaaS deployment.

\section*{Appendix A: Key Technologies}

\begin{description}
    \item[JavaFX] Cross-platform UI toolkit with scene graph, CSS theming, and property bindings.
    \item[PostgreSQL] ACID-compliant RDBMS for transactional portfolio storage.
    \item[kdb+] Columnar time-series database with q language for low-latency tick analytics.
    \item[Maven] Build automation, dependency management, plugin ecosystem.
    \item[Docker] Container orchestration for reproducible PostgreSQL deployment.
    \item[Yahoo Finance API] Public HTTP endpoint for real-time stock quotes.
\end{description}

\section*{Appendix B: Glossary}

\begin{description}
    \item[Asof Join] Time-aware join matching each fact row with the latest reference row at or before that timestamp.
    \item[Daemon Thread] Background thread that doesn't prevent JVM shutdown.
    \item[HDB] Historical Database (kdb+); on-disk partitioned data.
    \item[Platform.runLater] JavaFX API to enqueue UI updates on the Application Thread.
    \item[RDB] Real-time Database (kdb+); today's data in memory.
    \item[Task] JavaFX background job with progress/message properties.
    \item[TP] Tickerplant (kdb+); ingests feed, journals, republishes to subscribers.
    \item[VWAP] Volume-Weighted Average Price; time-series metric.
\end{description}

\end{document}

